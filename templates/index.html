<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –°–∞–ª–æ–Ω–∞ –∫—Ä–∞—Å–æ—Ç—ã</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .tab {
            padding: 15px 25px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .content {
            background: white;
            border-radius: 0 0 10px 10px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #333;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: transform 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            max-height: 400px;
            overflow-y: auto;
        }

        .section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¢ –°–∞–ª–æ–Ω –∫—Ä–∞—Å–æ—Ç—ã - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API</h1>
            <p>–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="openTab('customers')">–ö–ª–∏–µ–Ω—Ç—ã</button>
            <button class="tab" onclick="openTab('services')">–£—Å–ª—É–≥–∏</button>
            <button class="tab" onclick="openTab('supplies')">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</button>
            <button class="tab" onclick="openTab('records')">–ó–∞–ø–∏—Å–∏</button>
            <button class="tab" onclick="openTab('materials')">–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ö–ª–∏–µ–Ω—Ç—ã -->
        <div id="customers" class="tab-content active">
            <div class="grid">
                <div class="section">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</h3>
                    <form id="addCustomerForm">
                        <div class="form-group">
                            <label>–§–∞–º–∏–ª–∏—è:</label>
                            <input type="text" name="surname" required>
                        </div>
                        <div class="form-group">
                            <label>–ò–º—è:</label>
                            <input type="text" name="name" required>
                        </div>
                        <div class="form-group">
                            <label>–û—Ç—á–µ—Å—Ç–≤–æ:</label>
                            <input type="text" name="patronymic">
                        </div>
                        <div class="form-group">
                            <label>–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                            <input type="text" name="phone" required>
                        </div>
                        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</button>
                    </form>
                </div>

                <div class="section">
                    <h3>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                    <button class="btn" onclick="getCustomers()">–ü–æ–ª—É—á–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤</button>

                    <h3 style="margin-top: 30px;">–ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ –ø–æ ID</h3>
                    <div class="form-group">
                        <label>ID –∫–ª–∏–µ–Ω—Ç–∞:</label>
                        <input type="number" id="customerId" placeholder="–í–≤–µ–¥–∏—Ç–µ ID">
                    </div>
                    <button class="btn" onclick="getCustomerById()">–ù–∞–π—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞</button>
                </div>
            </div>

            <div class="result" id="customersResult"></div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –£—Å–ª—É–≥–∏ -->
        <div id="services" class="tab-content">
            <div class="grid">
                <div class="section">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</h3>
                    <form id="addServiceForm">
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ —É—Å–ª—É–≥–∏:</label>
                            <input type="text" name="name" required>
                        </div>
                        <div class="form-group">
                            <label>–¶–µ–Ω–∞:</label>
                            <input type="number" name="price" required>
                        </div>
                        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å —É—Å–ª—É–≥—É</button>
                    </form>
                </div>

                <div class="section">
                    <h3>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É—Å–ª—É–≥–∏</h3>
                    <button class="btn" onclick="getServices()">–ü–æ–ª—É—á–∏—Ç—å —É—Å–ª—É–≥–∏</button>

                    <h3 style="margin-top: 30px;">–ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —É—Å–ª—É–≥–∏</h3>
                    <div class="form-group">
                        <label>ID —É—Å–ª—É–≥–∏:</label>
                        <input type="number" id="serviceMaterialsId" placeholder="–í–≤–µ–¥–∏—Ç–µ ID —É—Å–ª—É–≥–∏">
                    </div>
                    <button class="btn" onclick="getServiceMaterials()">–ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã</button>
                </div>
            </div>

            <div class="result" id="servicesResult"></div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã -->
        <div id="supplies" class="tab-content">
            <div class="grid">
                <div class="section">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</h3>
                    <form id="addSupplyForm">
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞:</label>
                            <input type="text" name="name" required>
                        </div>
                        <div class="form-group">
                            <label>–¶–µ–Ω–∞:</label>
                            <input type="number" name="price" required>
                        </div>
                        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</button>
                    </form>
                </div>

                <div class="section">
                    <h3>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h3>
                    <button class="btn" onclick="getSupplies()">–ü–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã</button>
                </div>
            </div>

            <div class="result" id="suppliesResult"></div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ó–∞–ø–∏—Å–∏ -->
        <div id="records" class="tab-content">
            <div class="grid">
                <div class="section">
                    <h3>–°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å</h3>
                    <form id="addRecordForm">
                        <div class="form-group">
                            <label>ID –∫–ª–∏–µ–Ω—Ç–∞:</label>
                            <input type="number" name="id_customers" required>
                        </div>
                        <div class="form-group">
                            <label>ID —É—Å–ª—É–≥–∏:</label>
                            <input type="number" name="id_services" required>
                        </div>
                        <div class="form-group">
                            <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</label>
                            <input type="datetime-local" name="date" required>
                        </div>
                        <button type="submit" class="btn">–°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å</button>
                    </form>
                </div>

                <div class="section">
                    <h3>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏</h3>
                    <button class="btn" onclick="getRecords()">–ü–æ–ª—É—á–∏—Ç—å –∑–∞–ø–∏—Å–∏</button>

                    <h3 style="margin-top: 30px;">–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–µ–π</h3>
                    <button class="btn" onclick="getRecordsDetails()">–ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏</button>
                </div>
            </div>

            <div class="result" id="recordsResult"></div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏ -->
        <div id="materials" class="tab-content">
            <div class="grid">
                <div class="section">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–ª—è —É—Å–ª—É–≥–∏</h3>
                    <form id="addServiceSupplyForm">
                        <div class="form-group">
                            <label>ID —É—Å–ª—É–≥–∏:</label>
                            <input type="number" name="id_services" required>
                        </div>
                        <div class="form-group">
                            <label>ID –º–∞—Ç–µ—Ä–∏–∞–ª–∞:</label>
                            <input type="number" name="id_supplies" required>
                        </div>
                        <div class="form-group">
                            <label>–†–∞—Å—Ö–æ–¥ –º–∞—Ç–µ—Ä–∏–∞–ª–∞:</label>
                            <input type="number" step="0.01" name="material_consumption" required>
                        </div>
                        <div class="form-group">
                            <label>–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è:</label>
                            <input type="text" name="units_measurement" required>
                        </div>
                        <button type="submit" class="btn">–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</button>
                    </form>
                </div>

                <div class="section">
                    <h3>–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–≤—è–∑–∏ —É—Å–ª—É–≥–∏-–º–∞—Ç–µ—Ä–∏–∞–ª—ã</h3>
                    <button class="btn" onclick="getServicesSupplies()">–ü–æ–ª—É—á–∏—Ç—å —Å–≤—è–∑–∏</button>
                </div>
            </div>

            <div class="result" id="materialsResult"></div>
        </div>
    </div>

        <script>
            // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∞–º–∏
            function openTab(tabName) {
                const tabs = document.getElementsByClassName('tab-content');
                for (let tab of tabs) {
                    tab.classList.remove('active');
                }

                const tabButtons = document.getElementsByClassName('tab');
                for (let button of tabButtons) {
                    button.classList.remove('active');
                }

                document.getElementById(tabName).classList.add('active');
                event.currentTarget.classList.add('active');
            }

            // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
            const API_BASE = window.location.origin; // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â–∏–π origin

            // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            function showNotification(message, isSuccess = true) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    padding: 15px 20px;
                    background: ${isSuccess ? '#4CAF50' : '#f44336'};
                    color: white;
                    border-radius: 5px;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                `;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }

            // –ö–ª–∏–µ–Ω—Ç—ã
            document.getElementById('addCustomerForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);

                try {
                    const response = await fetch(`${API_BASE}/customers`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('customersResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ö–ª–∏–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
                    this.reset(); // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('customersResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞', false);
                }
            });

            async function getCustomers() {
                try {
                    const response = await fetch(`${API_BASE}/customers`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('customersResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ö–ª–∏–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('customersResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–ª–∏–µ–Ω—Ç–æ–≤', false);
                }
            }

            async function getCustomerById() {
                const id = document.getElementById('customerId').value;
                if (!id) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ ID –∫–ª–∏–µ–Ω—Ç–∞', false);
                    return;
                }

                try {
                    const response = await fetch(`${API_BASE}/customers/${id}`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        if (response.status === 404) {
                            throw new Error('–ö–ª–∏–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω');
                        }
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('customersResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ö–ª–∏–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('customersResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∫–ª–∏–µ–Ω—Ç–∞', false);
                }
            }

            // –£—Å–ª—É–≥–∏
            document.getElementById('addServiceForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                data.price = parseInt(data.price);

                try {
                    const response = await fetch(`${API_BASE}/services`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('servicesResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–£—Å–ª—É–≥–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
                    this.reset();
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('servicesResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —É—Å–ª—É–≥–∏', false);
                }
            });

            async function getServices() {
                try {
                    const response = await fetch(`${API_BASE}/services`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('servicesResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–£—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('servicesResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Å–ª—É–≥', false);
                }
            }

            async function getServiceMaterials() {
                const id = document.getElementById('serviceMaterialsId').value;
                if (!id) {
                    showNotification('–í–≤–µ–¥–∏—Ç–µ ID —É—Å–ª—É–≥–∏', false);
                    return;
                }

                try {
                    const response = await fetch(`${API_BASE}/services/${id}/materials`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('servicesResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è —É—Å–ª—É–≥–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('servicesResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤', false);
                }
            }

            // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º–∏, –Ω–æ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
            // –ú–∞—Ç–µ—Ä–∏–∞–ª—ã
            document.getElementById('addSupplyForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                data.price = parseInt(data.price);

                try {
                    const response = await fetch(`${API_BASE}/supplies`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('suppliesResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ú–∞—Ç–µ—Ä–∏–∞–ª —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!');
                    this.reset();
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('suppliesResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞', false);
                }
            });

            async function getSupplies() {
                try {
                    const response = await fetch(`${API_BASE}/supplies`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('suppliesResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ú–∞—Ç–µ—Ä–∏–∞–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('suppliesResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤', false);
                }
            }

            // –ó–∞–ø–∏—Å–∏
            document.getElementById('addRecordForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                data.id_customers = parseInt(data.id_customers);
                data.id_services = parseInt(data.id_services);

                try {
                    const response = await fetch(`${API_BASE}/records`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('recordsResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!');
                    this.reset();
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('recordsResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏', false);
                }
            });

            async function getRecords() {
                try {
                    const response = await fetch(`${API_BASE}/records`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('recordsResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–ó–∞–ø–∏—Å–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('recordsResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞–ø–∏—Å–µ–π', false);
                }
            }

            async function getRecordsDetails() {
                try {
                    const response = await fetch(`${API_BASE}/records/details`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('recordsResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('recordsResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–µ—Ç–∞–ª–µ–π –∑–∞–ø–∏—Å–µ–π', false);
                }
            }

            // –†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏
            document.getElementById('addServiceSupplyForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const data = Object.fromEntries(formData);
                data.id_services = parseInt(data.id_services);
                data.id_supplies = parseInt(data.id_supplies);
                data.material_consumption = parseFloat(data.material_consumption);

                try {
                    const response = await fetch(`${API_BASE}/services_supplies`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json'
                        },
                        body: JSON.stringify(data)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('materialsResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–†–∞—Å—Ö–æ–¥ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–æ–±–∞–≤–ª–µ–Ω!');
                    this.reset();
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('materialsResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–∞—Å—Ö–æ–¥–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞', false);
                }
            });

            async function getServicesSupplies() {
                try {
                    const response = await fetch(`${API_BASE}/services_supplies`, {
                        headers: { 'Accept': 'application/json' }
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    document.getElementById('materialsResult').textContent = JSON.stringify(result, null, 2);
                    showNotification('–°–≤—è–∑–∏ —É—Å–ª—É–≥–∏-–º–∞—Ç–µ—Ä–∏–∞–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
                } catch (error) {
                    console.error('Error:', error);
                    document.getElementById('materialsResult').textContent = '–û—à–∏–±–∫–∞: ' + error.message;
                    showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–≤—è–∑–µ–π', false);
                }
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            window.addEventListener('load', function() {
                console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, API_BASE:', API_BASE);
            });
        </script>
</body>
</html>